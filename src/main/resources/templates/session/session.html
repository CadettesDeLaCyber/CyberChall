<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">

<div th:insert="~{fragments/header :: header}"></div>

<body>

	<!-- NAVIGATION depuis le fragment nav -->
	<div th:insert="~{fragments/nav :: nav}"></div>

	<div class="session-container create">
		<h2>Préparez votre session</h2>

		<p>
			Sélectionnez <b>2 à 4</b> modules :
		</p>
		<!-- Formulaire de création de session -->
		<form action="/session" method="post">
			<!-- 2 à 4 sous-modules sélectionnables -->
			<!-- 
			<label><input type="checkbox" name="sousModules" value="protection"> Protection des données</label> 
			<label><input type="checkbox" name="sousModules" value="reseaux"> Réseaux sociaux</label> 
			<label><input type="checkbox" name="sousModules" value="securite"> Sécurité des appareils</label> 
			<label><input type="checkbox" name="sousModules" value="cyberattaques">Cyberattaques</label>
			 -->
			<div class="flex flex-wrap gap-6">
    <div th:each="module : ${modules}" class="group relative w-64 h-40 bg-white border rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-all duration-300">
        
        <!-- Checkbox sur toute la carte -->
        <label class="absolute inset-0 cursor-pointer z-10">
            <input type="checkbox" name="sousModules" th:value="${module.nom}" class="hidden peer">
        </label>

        <!-- Titre du module -->
        <div class="flex items-center justify-center h-full text-xl font-semibold text-gray-800 z-0">
            <span th:text="${module.nom}">Nom module</span>
        </div>

        <!-- Slide des sous-modules -->
        <div class="absolute inset-0 bg-white flex gap-3 p-4 overflow-x-auto transform translate-x-full group-hover:translate-x-0 transition-transform duration-500 ease-in-out z-20">
            <div th:each="sm : ${module.sousModules}" class="min-w-[120px] bg-blue-100 rounded-md p-2 text-center shadow">
                <span th:text="${sm.nom}">Sous-module</span>
            </div>
        </div>
    </div>
</div>
			
			<!-- Champs cachés -->
			<input type="hidden" name="dateDebut" th:value="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}" /> <input
				type="hidden" name="duree" value="30" /> 
			<input type="hidden" name="token" th:value="${token}" /> 
			<input type="hidden" name="id" th:value="${admin.id}" />

			<button type="submit">Créer une session</button>

		</form>
		

		<!-- Lien généré -->
		<div th:if="${createdSession != null}"
			class="link-container mt-4 text-center">
			<p>
				Session créée : <strong>[[${createdSession.token}]]</strong>
			</p>
		</div>
	</div>

	<!-- FOOTER -->
	<div th:insert="~{fragments/footer :: footer}"></div>

</body>
</html>